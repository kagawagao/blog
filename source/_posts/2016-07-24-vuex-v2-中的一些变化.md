---
title: vuex v2 中的一些变化
date: 2016-07-24 22:51:22
categories:
  - 技术
tags:
  - 前端开发
  - vue
  - vuex
---

由于之前身体抱恙休假在家，于是对 `vue/vuex` 便没有多少关注，在上周回来投入到工作中时发现 `vuex` 2.0.0 相对于之前的版本有了部分变化，关于 `vuex` 最新版的设计在此[issue](https://github.com/vuejs/vuex/issues/236)中。

## 命名语义化
---
首先就是针对命名的语义化，主要集中在两个名词上：`commit` 与 `dispatch`。

之前的 `store.dispatch` 变成了现在的 `store.commit`，但是 `store.dispatch` 依然可用，但仅仅用来触发某些 `action`。

首先，尤大认为用 `dispatch` 来使一个 `mutation` 发生改变在语义上是不正确的，`dispatch` 应当用来表明一个事件是我们有意触发的这养一个操作，但对于 `mutation` 来说，需要有一个动词来表示我们在做这个操作之后会触发状态改变，用他的原话来说就是：*Dispatch should be indicating the intention for something to happen. For mutations, we want a verb that indicates the state change is happening as soon as you call it.*

- `dispatch`：表明有某些事件发生的意向（可能是异步操作产生的副作用）。
- `commit`：说明会使实际状态发生改变的同步操作。

例子：
```javascript
// before 2.0.0
actions: {
  'ACTION_TYPE': ({dispatch}, payload) => {
    dispatch(payload)
  }
}

// now
actions: {
  'ACTION_TYPE': ({ commit }, payload) => {
    commit(payload)
  }
// dispatch
store.dispatch('ACTION_TYPE')
```
从上面的代码中我们可以看出，在 `vuex` 2.0.0 中，`commit` 用来说明一个使 `mutation` 状态发生改变的操作，而 `dispatch` 则用来触发一个 `action`。

## 模块的可移植性和可组合性
---
### `store` 和 `module` 中的 `action`

待续~~~ :sweat_smile:
